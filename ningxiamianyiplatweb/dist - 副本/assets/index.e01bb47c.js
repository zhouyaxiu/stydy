import{a4 as e,a5 as a}from"./gjdc.b3af9cfa.js";import{m as l}from"./index.143fdacc.js";import{Y as t,r,j as s,o,b as n,c as i,e as u,k as d,w as p,A as c,u as m,U as v}from"./vendor.cc783c3b.js";const f={class:"condition-row"},b={class:"item"},g=c("span",{class:"label"},"选择地区：",-1),h={class:"item"},y=c("span",{class:"label"},"截止日期：",-1),N={class:"item"},C=c("span",{class:"label"},"生产企业：",-1),T={__name:"index",setup(T){const{appContext:w}=t(),I=w.config.globalProperties,V=l(),k=r([]),W=r(0),j=r(),x=s([{label:"接种人群",prop:"pageAge",minWidth:"90"},{label:"地区",prop:"areaName",minWidth:"200"},{label:"疫苗生产企业",prop:"factoryName",minWidth:"120"},{label:"序贯接种第三剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"xug3dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"xug3lj",minWidth:"120"}]},{label:"序贯接种第四剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"xug4dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"xug4lj",minWidth:"120"}]},{label:"未感染第五剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"wgr5dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"wgr5lj",minWidth:"120"}]},{label:"已感染人群",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：剂次）",prop:"ygrdr",minWidth:"120"},{label:"累计接种人数（单位：剂次）",prop:"ygrlj",minWidth:"120"}]}]),S=r(null);let L=s({areaId:V.userInfo.areaId,areaCode:V.userInfo.areaCode,areaName:V.userInfo.areaName,selectAreaLevel:sessionStorage.getItem("currentLevel"),skipValue:String(Number(sessionStorage.getItem("currentLevel"))+1)});const U=r([I.$dateUtil.dayAddNum(8),I.$dateUtil.dayAddNum(1)]),$=()=>{let a=U.value[0],l=U.value[1];if(!a||!l)return I.$util.showMsg("请选择填报日期范围！","error",5e3,!0);if(!j.value.fenterNo)return I.$util.showMsg("请选择生产企业！","error",5e3,!0);const t={areaCode:L.areaCode,areaName:L.areaName,skipLevel:L.skipValue,startDate:a,endDate:l,factoryId:j.value.fenterNo.join(","),operateType:I.$consts.OPTYPE_QUERY,cModId:V.moduleId};S.value=t,e(t).then((e=>{k.value=e.data.data,W.value=e.data.sec}))},_=e=>{L=e,L.skipValue=String(Number(L.selectAreaLevel)+1)},A=e=>{L.skipValue=e},P=()=>{if(!S.value||S.value.areaCode!=L.areaCode)return I.$util.showMsg("查询后才可以导出！","error",5e3,!0);let e=JSON.parse(JSON.stringify(S.value));e.operateType=I.$consts.OPTYPE_OUTPUT,a(e)},M=({row:e,column:a,rowIndex:l,columnIndex:t})=>{if(0==t||2==t){const t=e[a.property];if(t){const e=k.value[l-1];let r=k.value[l+1];if(e&&e[a.property]===t)return{rowspan:0,colspan:0};{let e=1;for(;r&&r[a.property]===t;)e++,r=k.value[e+l];if(e>1)return{rowspan:e,colspan:1}}}}};return o((()=>{})),(e,a)=>{const l=n("ss-area-areaTreeStation"),t=n("ss-date-range-new"),r=n("ss-all-vaccine-vendor"),s=n("ss-custom-button"),o=n("ss-query-bottom"),T=n("ss-condition-area"),w=n("ss-custom-table");return i(),u("div",null,[d(T,null,{default:p((()=>[c("div",f,[c("div",b,[g,d(l,{modelValue:m(L),"onUpdate:modelValue":a[0]||(a[0]=e=>v(L)?L.value=e:L=e),getToLevelNum:5,showSelect:!0,onNodeClick:_,onSelectClick:A},null,8,["modelValue"])]),c("div",h,[y,d(t,{defaultValue:U.value,"onUpdate:defaultValue":a[1]||(a[1]=e=>U.value=e)},null,8,["defaultValue"])]),c("div",N,[C,d(r,{ref_key:"selectedVaccineVendor",ref:j,type:4},null,512)])]),d(o,{statisTics:!0,secTime:W.value},{default:p((()=>[d(s,{type:"query",onClick:$}),d(s,{type:"output",onClick:P})])),_:1},8,["secTime"])])),_:1}),d(w,{tableData:k.value,columnList:x,spanMethod:M},null,8,["tableData","columnList"])])}}};export{T as default};

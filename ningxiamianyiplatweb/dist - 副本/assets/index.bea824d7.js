import{a2 as e,a3 as a}from"./gjdc.b3af9cfa.js";import{m as l}from"./index.143fdacc.js";import{Y as t,r,j as s,o as i,b as o,c as n,e as d,k as u,w as p,A as c,u as m,U as b}from"./vendor.cc783c3b.js";const h={class:"condition-row"},v={class:"item"},f=c("span",{class:"label"},"选择地区：",-1),g={class:"item"},j=c("span",{class:"label"},"截止日期：",-1),y={class:"item"},C=c("span",{class:"label"},"生产企业：",-1),T={__name:"index",setup(T){const{appContext:W}=t(),N=W.config.globalProperties,w=l(),I=r([]),V=r(0),k=r(),x=s([{label:"接种人群",prop:"pageAge",minWidth:"90"},{label:"地区",prop:"areaName",minWidth:"200"},{label:"疫苗生产企业",prop:"factoryName",minWidth:"120"},{label:"基础免疫第一剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"jc1dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"jc1lj",minWidth:"120"}]},{label:"加强接种第二剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"jq2dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"jq2lj",minWidth:"120"}]},{label:"序贯接种第三剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"xug3dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"xug3lj",minWidth:"120"}]},{label:"加强接种第三剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"jq3dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"jq3lj",minWidth:"120"}]},{label:"序贯接种第四剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"xug4dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"xug4lj",minWidth:"120"}]},{label:"未感染第五剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"wgr5dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"wgr5lj",minWidth:"120"}]},{label:"已感染人群",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：剂次）",prop:"ygrdr",minWidth:"140"},{label:"累计接种人数（单位：剂次）",prop:"ygrlj",minWidth:"140"}]}]),S=r(null);let L=s({areaId:w.userInfo.areaId,areaCode:w.userInfo.areaCode,areaName:w.userInfo.areaName,selectAreaLevel:sessionStorage.getItem("currentLevel"),skipValue:String(Number(sessionStorage.getItem("currentLevel"))+1)});const U=r([N.$dateUtil.dayAddNum(8),N.$dateUtil.dayAddNum(1)]),$=()=>{let a=U.value[0],l=U.value[1];if(!a||!l)return N.$util.showMsg("请选择填报日期范围！","error",5e3,!0);if(!k.value.fenterNo)return N.$util.showMsg("请选择生产企业！","error",5e3,!0);const t={areaCode:L.areaCode,areaName:L.areaName,skipLevel:L.skipValue,startDate:a,endDate:l,factoryId:k.value.fenterNo.join(","),operateType:N.$consts.OPTYPE_QUERY,cModId:w.moduleId};S.value=t,e(t).then((e=>{I.value=e.data.data,V.value=e.data.sec}))},_=e=>{L=e,L.skipValue=String(Number(L.selectAreaLevel)+1)},q=e=>{L.skipValue=e},A=()=>{if(!S.value||S.value.areaCode!=L.areaCode)return N.$util.showMsg("查询后才可以导出！","error",5e3,!0);let e=JSON.parse(JSON.stringify(S.value));e.operateType=N.$consts.OPTYPE_OUTPUT,a(e)},P=({row:e,column:a,rowIndex:l,columnIndex:t})=>{if(0==t||2==t){const t=e[a.property];if(t){const e=I.value[l-1];let r=I.value[l+1];if(e&&e[a.property]===t)return{rowspan:0,colspan:0};{let e=1;for(;r&&r[a.property]===t;)e++,r=I.value[e+l];if(e>1)return{rowspan:e,colspan:1}}}}};return i((()=>{})),(e,a)=>{const l=o("ss-area-areaTreeStation"),t=o("ss-date-range-new"),r=o("ss-all-vaccine-vendor"),s=o("ss-custom-button"),i=o("ss-query-bottom"),T=o("ss-condition-area"),W=o("ss-custom-table");return n(),d("div",null,[u(T,null,{default:p((()=>[c("div",h,[c("div",v,[f,u(l,{modelValue:m(L),"onUpdate:modelValue":a[0]||(a[0]=e=>b(L)?L.value=e:L=e),getToLevelNum:5,showSelect:!0,onNodeClick:_,onSelectClick:q},null,8,["modelValue"])]),c("div",g,[j,u(t,{defaultValue:U.value,"onUpdate:defaultValue":a[1]||(a[1]=e=>U.value=e)},null,8,["defaultValue"])]),c("div",y,[C,u(r,{ref_key:"selectedVaccineVendor",ref:k,type:3},null,512)])]),u(i,{statisTics:!0,secTime:V.value},{default:p((()=>[u(s,{type:"query",onClick:$}),u(s,{type:"output",onClick:A})])),_:1},8,["secTime"])])),_:1}),u(W,{tableData:I.value,columnList:x,spanMethod:P},null,8,["tableData","columnList"])])}}};export{T as default};

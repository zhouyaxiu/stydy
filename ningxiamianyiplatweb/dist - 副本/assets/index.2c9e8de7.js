var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,s=(e,a)=>{for(var l in a||(a={}))i.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&r(e,l,a[l]);return e},n=(e,t)=>a(e,l(t));import{a as d,b as p,c as u,d as c}from"./gjdc.b3af9cfa.js";import{r as b,j as m,S as v,b as h,c as f,e as g,k as y,w as W,f as T,A as j,U as C,I as w,Y as N,o as D,d as k,u as O}from"./vendor.cc783c3b.js";import{m as x}from"./index.143fdacc.js";const V={key:0,style:{position:"absolute",top:"92px",right:"40px"}},P={style:{margin:"-16px"}},I={__name:"dialogInfo",props:{visible:{type:Boolean,default:!1},detailData:{type:Object,default:{}},detailOtherData:{type:Object,default:{}}},emits:["close"],setup(e,{emit:a}){const l=e,{appContext:t}=N(),i=t.config.globalProperties,o=b([]),r=b(0),u=b("1"),c=b(20),D=b(!1),k=m([{label:"序号",type:"index",minWidth:"80"},{label:"姓名",prop:"name",minWidth:"140",overflowTip:!0},{label:"性别",prop:"sex",minWidth:"80"},{label:"出生日期",prop:"birth",minWidth:"100"},{label:"工作单位",prop:"fchildUnitName",minWidth:"100",overflowTip:!0},{label:"人群分类",prop:"fcrowdKindName",minWidth:"160",overflowTip:!0},{label:"联系电话",prop:"mobPhone",minWidth:"120"},{label:"第1剂次",hasChildrenTitle:!0,list:[{label:"接种日期",prop:"jzrq1",minWidth:"100"},{label:"接种人员",prop:"jzys1",minWidth:"100",overflowTip:!0},{label:"接种单位",prop:"fstationName1",minWidth:"160",overflowTip:!0}]},{label:"第2剂次",hasChildrenTitle:!0,list:[{label:"接种日期",prop:"jzrq2",minWidth:"100"},{label:"接种人员",prop:"jzys2",minWidth:"100",overflowTip:!0},{label:"接种单位",prop:"fstationName2",minWidth:"160",overflowTip:!0}]},{label:"第3剂次",hasChildrenTitle:!0,list:[{label:"接种日期",prop:"jzrq3",minWidth:"100"},{label:"接种人员",prop:"jzys3",minWidth:"100",overflowTip:!0},{label:"接种单位",prop:"fstationName3",minWidth:"160",overflowTip:!0}]},{label:"第4剂次",hasChildrenTitle:!0,list:[{label:"接种日期",prop:"jzrq4",minWidth:"100"},{label:"接种人员",prop:"jzys4",minWidth:"100",overflowTip:!0},{label:"接种单位",prop:"fstationName4",minWidth:"160",overflowTip:!0}]},{label:"第5剂次",hasChildrenTitle:!0,list:[{label:"接种日期",prop:"jzrq5",minWidth:"100"},{label:"接种人员",prop:"jzys5",minWidth:"100",overflowTip:!0},{label:"接种单位",prop:"fstationName5",minWidth:"160",overflowTip:!0}]}]),O=e=>{"number"==typeof e&&(u.value=e);const a=n(s({},l.detailData),{pageIndex:u.value});d(a).then((e=>{if(200!=e.data.code)return o.value=[],r.value=0,i.$util.showMsg(e.data.popMsg,"error",5e3,!0);o.value=e.data.data.data.list,r.value=e.data.data.data.total}))};v((()=>l.visible),(e=>{e&&O()}),{deep:!0,immediate:!0});const x=()=>{a("close",!0)},I=()=>{D.value=!0},L=e=>{let a=n(s(s({},l.detailData),l.detailOtherData),{pageIndex:e,operateType:i.$consts.OPTYPE_OUTPUT});p(a)},S=()=>{D.value=!1};return(a,l)=>{const t=h("ss-pagination"),i=h("ss-custom-button"),s=h("ss-custom-table"),n=h("el-dialog"),d=h("ss-export-dialog");return f(),g(w,null,[y(n,{title:"新冠病毒疫苗分年龄、分企业接种信息汇总表详情",modelValue:e.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>C(visible)?visible.value=e:null),width:"1200","before-close":x,"close-on-click-modal":!1,class:"userManageFormDialog","append-to-body":!0},{default:W((()=>[y(t,{total:r.value,pageIndex:u.value,pageSize:c.value,onPageChange:O},null,8,["total","pageIndex","pageSize"]),r.value?(f(),g("div",V,[y(i,{type:"output",onClick:I})])):T("",!0),j("div",P,[y(s,{tableData:o.value,columnList:k},null,8,["tableData","columnList"])])])),_:1},8,["modelValue"]),y(d,{onCallback:L,onHandleClose:S,total:r.value,typeStr:"新冠病毒疫苗分年龄、分企业接种信息汇总表详情导出",dialogVisible:D.value},null,8,["total","dialogVisible"])],64)}}};const L={class:"ageandfenter"},S={class:"condition-row"},z={class:"item"},U=j("span",{class:"label required"},"填报单位：",-1),q={class:"item"},_=j("span",{class:"label required"},"填报日期：",-1),M={class:"item"},$=j("span",{class:"label"},"疫苗生产企业：",-1),A={class:"item"},F=j("span",{class:"label required"},"数据来源：",-1),E={__name:"index",setup(e){const{appContext:a}=N(),l=a.config.globalProperties,t=x(),i=b([]),o=b(0),r=b({code:"",name:"全部"}),d=b(!1),p=m([{label:"年龄组",prop:"age",minWidth:"80"},{label:"摸底总人数",prop:"md",minWidth:"120"},{label:"合计",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj",minWidth:"120"},{label:"当日接种人数",prop:"dr",minWidth:"120"}]},{label:"第一剂",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj1",minWidth:"120",type:"clickable"},{label:"当日接种人数",prop:"dr1",minWidth:"120",type:"clickable"}]},{label:"第二剂",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj2",minWidth:"120",type:"clickable"},{label:"当日接种人数",prop:"dr2",minWidth:"120",type:"clickable"}]},{label:"第三剂",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj3",minWidth:"120",type:"clickable"},{label:"当日接种人数",prop:"dr3",minWidth:"120",type:"clickable"}]},{label:"第四剂",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj4",minWidth:"120",type:"clickable"},{label:"当日接种人数",prop:"dr4",minWidth:"120",type:"clickable"}]},{label:"未感染第五剂",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj5",minWidth:"120",type:"clickable"},{label:"当日接种人数",prop:"dr5",minWidth:"120",type:"clickable"}]},{label:"未感染第六剂",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"focuslj",minWidth:"120",type:"clickable"},{label:"当日接种人数",prop:"focusdr",minWidth:"120",type:"clickable"}]},{label:"已感染人群",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"ygrlj",minWidth:"120"},{label:"当日接种人数",prop:"ygrdr",minWidth:"120"}]}]),v=b(null),w=b(null),V=b(null);let P=m({areaId:t.userInfo.areaId,areaCode:t.userInfo.areaCode,selectAreaLevel:sessionStorage.getItem("currentLevel"),skipValue:String(Number(sessionStorage.getItem("currentLevel"))+1),areaName:t.userInfo.areaName});const E=b(null),Y=b([l.$dateUtil.dayAddNum(7),l.$dateUtil.currentDate()]),J=()=>{let e=Y.value[0],a=Y.value[1];if(!e||!a)return l.$util.showMsg("请选择填报日期范围！","error",5e3,!0);const t={areaCode:P.areaCode,areaLevel:P.selectAreaLevel,startDate:e,endDate:a,fenterNo:E.value.fenterNo,sourceFrom:r.value.code};v.value=t,V.value={sourceName:r.value.name,fenterName:E.value.fenterName,areaName:P.areaName},u(t).then((e=>{200===e.data.code?(i.value=e.data.data.data,o.value=e.data.data.sec):e.data.popMsg&&(i.value=[],o.value="",l.$util.showMsg(e.data.popMsg,"error"))}))},B=e=>{P=e,P.skipValue=String(Number(P.selectAreaLevel)+1)},H=()=>{if(!v.value||v.value.areaCode!=P.areaCode)return l.$util.showMsg("查询后才可以导出！","error",5e3,!0);let e=JSON.parse(JSON.stringify(v.value));e=n(s(s({},e),V.value),{areaName:P.areaName+" "+P.areaCode.slice(0,10)}),e.operateType=l.$consts.OPTYPE_OUTPUT,c(e)},K=(e,a)=>{w.value=n(s({},v.value),{areaCode:v.value.areaCode,areaLevel:v.value.areaLevel,startDate:v.value.startDate,endDate:v.value.endDate,fenterNo:v.value.fenterNo,sourceFrom:v.value.sourceFrom,age:"合计"==e.age?"-1":Math.max(...e.age.match(/\d+/g)),jici:a.slice(2)}),d.value=!0},G=()=>{d.value=!1};return D((()=>{})),(e,a)=>{const l=h("ss-area-areaTreeStation"),t=h("ss-date-range-new"),s=h("ss-vaccine-vendor"),n=h("ss-source-data"),u=h("ss-custom-button"),c=h("ss-query-bottom"),b=h("ss-condition-area"),m=h("ss-custom-table");return f(),g("div",L,[y(b,null,{default:W((()=>[j("div",S,[j("div",z,[U,y(l,{modelValue:O(P),"onUpdate:modelValue":a[0]||(a[0]=e=>C(P)?P.value=e:P=e),getToLevelNum:5,showSelect:!1,onNodeClick:B},null,8,["modelValue"])]),j("div",q,[_,y(t,{defaultValue:Y.value,"onUpdate:defaultValue":a[1]||(a[1]=e=>Y.value=e)},null,8,["defaultValue"])]),j("div",M,[$,y(s,{ref_key:"selectedVaccineVendor",ref:E},null,512)]),j("div",A,[F,y(n,{sourceData:r.value,"onUpdate:modelValue":a[2]||(a[2]=e=>r.value=e)},null,8,["sourceData"])])]),y(c,{secTime:o.value},{default:W((()=>[y(u,{type:"query",onClick:J}),y(u,{type:"output",onClick:H})])),_:1},8,["secTime"])])),_:1}),y(m,{tableData:i.value,columnList:p,onOpenDetailDialog:K},null,8,["tableData","columnList"]),d.value?(f(),k(I,{key:0,visible:d.value,onClose:G,detailData:w.value,detailOtherData:V.value},null,8,["visible","detailData","detailOtherData"])):T("",!0)])}}};export{E as default};

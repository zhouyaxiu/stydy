var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,r=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))i.call(a,t)&&n(e,t,a[t]);return e},d=(e,l)=>a(e,t(l));import{U as p,V as s}from"./gjdc.b3af9cfa.js";import{m as u}from"./index.143fdacc.js";import{Y as m,r as c,j as v,b,c as h,e as f,k as w,w as g,A as C,u as y,U as T,l as N,B as I,n as j,a1 as x}from"./vendor.cc783c3b.js";const O={class:"condition-row"},S={class:"item"},P=C("div",{class:"label"},"选择地区：",-1),_={class:"item"},k=C("div",{class:"label"},"导出月份：",-1),L={__name:"index",setup(e){const a=u(),{appContext:t}=m(),l=t.config.globalProperties,o=c([]),i=c(null),n=c(0),L=c(0),U=c(null),Y=c(null),E=c(1),M=c(20),$=c(l.$dateUtil.lastMonth());let V=v({areaId:a.userInfo.areaId,areaCode:a.userInfo.areaCode,areaName:a.userInfo.areaName,selectAreaLevel:sessionStorage.getItem("currentLevel"),skipValue:String(Number(sessionStorage.getItem("currentLevel"))+1)});const q=e=>{i.value.setheight()},z=e=>{V=e,V.skipValue=String(Number(V.selectAreaLevel)+1)},A=e=>e.getTime()<new Date(l.$consts.MINSELECTTIME).getTime()||e.getTime()>new Date(l.$dateUtil.lastMonth()).getTime(),B=e=>{$.value=e},D=()=>{U.value={pageNum:E.value?E.value:1,date:$.value,areaCode:V.areaCode,areaName:V.areaName,pageSize:20,operateType:l.$consts.OPTYPE_QUERY,cModId:a.moduleId},Y.value=JSON.parse(JSON.stringify(U.value)),K()},F=e=>{E.value=e,U.value.pageNum=e||1,J(2)},J=e=>{U.value.flag=e,p(r({},U.value)).then((e=>{o.value=e.data.data.list,L.value=e.data.data.total,n.value=e.data.sec})).catch((()=>{}))},K=()=>{p(d(r({},U.value),{flag:""})).then((e=>{if("-1"===e.data.msg)j.info("查询将花费数分钟,已提交后台统计！"),J("rpt");else if("0"===e.data.msg)j.warning("正在进行后台统计, 请稍后查询 ");else{const a=e.data.msg.split(",")[0];x.confirm(`${a}进行过统计, 是否直接查看？\n(点击取消将重新查询)`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((()=>{J("query")})).catch((()=>{j.info("查询将花费数分钟,已提交后台统计！"),J("rpt")}))}})).catch((()=>{}))},G=()=>{if(!Y.value)return void j.error("查询后才可以导出！");if(0===o.value.length)return void j.error("暂无需要导出的数据！");let e=d(r({},Y.value),{operateType:l.$consts.OPTYPE_OUTPUT});s(e)};return(e,t)=>{const l=b("ss-area-areaTreeStation"),r=b("ss-date-picker"),d=b("ss-custom-button"),p=b("ss-query-bottom"),s=b("ss-condition-area"),u=b("ss-pagination"),m=b("el-table-column"),c=b("ss-table");return h(),f("div",null,[w(s,{onSetConditionFlag:q},{default:g((()=>[C("div",O,[C("div",S,[P,w(l,{getToLevelNum:2-y(a).currentLevel,modelValue:y(V),"onUpdate:modelValue":t[0]||(t[0]=e=>T(V)?V.value=e:V=e),onNodeClick:z},null,8,["getToLevelNum","modelValue"])]),C("div",_,[k,w(r,{value:$.value,"disabled-date":A,valueFormat:"YYYY-MM",dateType:"month",onInput:B},null,8,["value"])])]),w(p,{secTime:n.value},{default:g((()=>[w(d,{type:"query",onClick:D}),w(d,{type:"output",onClick:G})])),_:1},8,["secTime"])])),_:1}),w(u,{total:L.value,pageIndex:E.value,pageSize:M.value,onPageChange:F},null,8,["total","pageIndex","pageSize"]),w(c,{data:o.value,ref_key:"tabPage",ref:i},{default:g((()=>[w(m,{align:"center",type:"index",width:"60",label:"序号",fixed:""},{default:g((e=>[N(I((E.value-1)*M.value+e.$index+1),1)])),_:1}),w(m,{prop:"fchildno",label:"预防接种档案编号","min-width":"180"}),w(m,{prop:"name","min-width":"160",label:"受种者姓名"}),w(m,{prop:"fidCardTypeText",label:"身份证件类别","min-width":"180"}),w(m,{prop:"fidCardType",label:"身份证件类别代码",width:"150"}),w(m,{prop:"cid",label:"身份证件号码","min-width":"160"}),w(m,{prop:"sexCn",label:"性别","min-width":"70"}),w(m,{prop:"sexCodeCn",label:"性别代码","min-width":"90"}),w(m,{prop:"birth",label:"受种者出生时间","min-width":"140"}),w(m,{prop:"nationName",label:"国籍","min-width":"100"}),w(m,{prop:"fnationAlityCode",label:"国籍代码","min-width":"90"}),w(m,{prop:"crowdKindCnName",label:"人群分类","min-width":"280","show-overflow-tooltip":""}),w(m,{prop:"fcrowdKindCode",label:"人群分类代码","min-width":"120"}),w(m,{prop:"jzrq",label:"疫苗接种时间","min-width":"170"}),w(m,{prop:"jc",label:"疫苗剂次","min-width":"90"}),w(m,{prop:"compShortNameCn",label:"疫苗生产企业","min-width":"120"}),w(m,{prop:"compGjCode",label:"疫苗生产企业代码","min-width":"160"}),w(m,{prop:"ymph",label:"疫苗批号","min-width":"170"}),w(m,{prop:"fmonitorCode",label:"疫苗追溯码","min-width":"200"}),w(m,{prop:"stationNameCn",label:"接种单位","min-width":"200","show-overflow-tooltip":""}),w(m,{prop:"stationCodeCn",label:"接种单位编码","min-width":"130"}),w(m,{prop:"counNameCn",label:"区县名称","min-width":"120","show-overflow-tooltip":""}),w(m,{prop:"counCodeCn",label:"区县编码","min-width":"120"}),w(m,{prop:"cityNameCn",label:"地市名称","min-width":"120","show-overflow-tooltip":""}),w(m,{prop:"cityCodeCn",label:"地市编码","min-width":"120"})])),_:1},8,["data"])])}}};export{L as default};

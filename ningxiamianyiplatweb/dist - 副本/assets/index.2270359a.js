import{q as e,o as a}from"./gjdc.b3af9cfa.js";import{m as l}from"./index.143fdacc.js";import{Y as t,r as o,j as s,b as r,c as i,e as n,k as u,w as d,A as p,u as m,U as c}from"./vendor.cc783c3b.js";const v={class:"condition-row"},b={class:"item"},f=p("span",{class:"required label"},"地区选择：",-1),C={class:"item"},g=p("span",{class:"required label"},"日期范围：",-1),h={__name:"index",setup(h){const{appContext:T}=t(),N=T.config.globalProperties,j=l(),y=o([]),D=o(0),k=s([{label:"地区",prop:"areaName",overflowTip:!0},{label:"档案（基本信息）",hasChildrenTitle:!0,list:[{label:"建档数量",prop:"addinfoCount",minWidth:"60"},{label:"及时建档数量",prop:"infoaddtimelyCount",minWidth:"60"},{label:"建档及时性%",prop:"infoaddtimelyCountRate",minWidth:"60"},{label:"上传及时性%",prop:"infosendtimelyCountRate",minWidth:"60"}]},{label:"接种记录",hasChildrenTitle:!0,list:[{label:"录入数量",prop:"addjzjlCount",minWidth:"60"},{label:"及时录入数量",prop:"jzjladdtimelyCount",minWidth:"60"},{label:"录入及时性%",prop:"jzjladdtimelyCountRate",minWidth:"60"},{label:"上传及时性%",prop:"jzjlsendtimelyCountRate",minWidth:"60"}]}]),V=o(null),I=o([N.$dateUtil.currentMonth(),N.$dateUtil.currentMonth()]);let L=s({areaId:j.userInfo.areaId,areaCode:j.userInfo.areaCode,selectAreaLevel:sessionStorage.getItem("currentLevel"),skipValue:String(Number(sessionStorage.getItem("currentLevel"))+1),areaName:j.userInfo.areaName});const S=()=>{let a=I.value[0],l=I.value[1];if(!a||!l)return N.$util.showMsg("请选择日期范围！","error",5e3,!0);let{areaCode:t,areaId:o,selectAreaLevel:s,areaName:r,skipValue:i}=L;const n={areaCode:t,areaId:o,areaLevel:s,areaName:r,endTime:l,skipValue:i,startTime:a};V.value=n,e(n).then((e=>{200===e.data.code?(y.value=e.data.data.list,D.value=e.data.sec):e.data.popMsg&&(y.value=[],N.$util.showMsg(e.data.popMsg,"error"))}))},w=e=>{L=e,L.skipValue=String(Number(L.selectAreaLevel)+1)},M=e=>{L.skipValue=e},W=()=>{if(!V.value||V.value.areaCode!=L.areaCode)return N.$util.showMsg("查询后才可以导出！","error",5e3,!0);let e=JSON.parse(JSON.stringify(V.value));e.areaName=e.areaName+" "+e.areaCode.slice(0,10),e.operateType=N.$consts.OPTYPE_OUTPUT,a(e)};return(e,a)=>{const l=r("ss-area-areaTreeStation"),t=r("ss-month-range-new"),o=r("ss-custom-button"),s=r("ss-query-bottom"),h=r("ss-condition-area"),T=r("ss-custom-table");return i(),n("div",null,[u(h,null,{default:d((()=>[p("div",v,[p("div",b,[f,u(l,{modelValue:m(L),"onUpdate:modelValue":a[0]||(a[0]=e=>c(L)?L.value=e:L=e),getToLevelNum:5,showSelect:!0,onNodeClick:w,onSelectClick:M},null,8,["modelValue"])]),p("div",C,[g,u(t,{defaultValue:I.value,"onUpdate:defaultValue":a[1]||(a[1]=e=>I.value=e),uptoDate:m(N).$consts.ENDDATEMONTH},null,8,["defaultValue","uptoDate"])])]),u(s,{statisTics:!0,secTime:D.value},{default:d((()=>[u(o,{type:"query",onClick:S}),u(o,{type:"output",onClick:W})])),_:1},8,["secTime"])])),_:1}),u(T,{tableData:y.value,columnList:k,onOpenDetailDialog:e.openDetailDialog,remarkText:"①省、市、县、乡、接种单位采用静态计算。"},null,8,["tableData","columnList","onOpenDetailDialog"])])}}};export{h as default};

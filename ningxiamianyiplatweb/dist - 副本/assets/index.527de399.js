import{c as e,e as t,A as i,y as a,aJ as n,a5 as s,B as l,l as r,f as c,R as d}from"./vendor.cc783c3b.js";import{_ as o}from"./index.143fdacc.js";PDFJS.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.0.943/pdf.worker.js";const h={name:"app",data:()=>({pdfData:"",url:"",pdfText:{items:[]},scale:1,currentPage:1,isFullScreen:!1,fileName:"",isUrlInputShow:!1}),filters:{toFixed:e=>e.toFixed(1)},computed:{nextDisable(){return this.currentPage===this.pdfData.numPages},prevDisable(){return 1===this.currentPage}},mounted(){this.url&&this.getPDF(),document.onkeydown=e=>{if(this.isFullScreen){if(27===window.event.keyCode)return void(this.isFullScreen=!1);if(37===window.event.keyCode||38===window.event.keyCode){if(e.preventDefault(),!this.checkPageValid("minus"))return;return this.currentPage--,this.changePage(),void this.fullscreen()}if(39===window.event.keyCode||40===window.event.keyCode){if(e.preventDefault(),!this.checkPageValid("add"))return;this.currentPage++,this.changePage(),this.fullscreen()}}}},methods:{async getPDF(e=null){let t=null;t=e?await PDFJS.getDocument(e):await PDFJS.getDocument(this.url),this.pdfData=t;for(let i=1;i<=t.numPages;i++)this.renderPdf(t,i)},reRenderPdf(){for(let e=1;e<=this.pdfData.numPages;e++)this.renderPdf(this.pdfData,e)},async renderPdf(e,t){try{const i=await e.getPage(t),a=i.getViewport(this.scale),n=this.$refs.container,s=document.createElement("div"),l=document.createElement("canvas"),r=l.getContext("2d");s.setAttribute("id",`page-${i.pageIndex+1}`),s.setAttribute("style"," position: relative;\n              display: flex;\n              justify-content: center;\n              padding-top: 50px "),s.appendChild(l),l.height=a.height,l.width=a.width;const c={canvasContext:r,viewport:a};i.render(c),n.appendChild(s),this.renderText(i,a,s)}catch(i){}},async renderText(e,t,i){try{const i=await e.getTextContent(),a=document.createElement("div");this.pdfText.items=this.pdfText.items.concat(i.items),a.setAttribute("class","textLayer"),a.setAttribute("style",`width: ${t.width}px; margin: 0 auto; margin-top: 50px`)}catch(a){}},resize(e){"add"===e?this.scale+=.1:this.scale-=.1,this.$refs.container.innerHTML="",this.$nextTick((()=>{this.reRenderPdf()}))},nextPage(){this.checkPageValid("add")&&(this.currentPage++,this.changePage())},prevPage(){this.checkPageValid("minus")&&(this.currentPage--,this.changePage())},checkPageValid(e){return this.currentPage>1&&this.currentPage<this.pdfData.numPages||("minus"===e&&1===this.currentPage?(alert("已经是第一页了"),!1):"add"!==e||this.currentPage!==this.pdfData.numPages||(alert("已经是最后一页了"),!1))},changePage(){location.hash=`#page-${this.currentPage}`},fullscreen(){this.isFullScreen=!0,document.getElementById(`page-${this.currentPage}`).requestFullscreen()},handleUpload(e){const t=this.$refs.pdfFile.files[0],i=new FileReader;this.fileName=t.name,i.readAsDataURL(t,"UTF-8"),i.onload=e=>{const t=e.target.result;this.$refs.container.innerHTML="",this.getPDF(t)}},submit(){this.$refs.container.innerHTML="",this.getPDF(),this.isUrlInputShow=!1}}},f={id:"app"},p={id:"main"},u={class:"toolbar"},g={class:"page-control"},P=["disabled"],m=[i("svg",{t:"1570849872944",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2327",width:"20",height:"20"},[i("path",{d:"M472.064 272.448l-399.232 399.232c-22.08 22.08-22.08 57.792 0 79.872 22.016 22.016 57.792 22.08 79.872 0L512 392.256l359.296 359.296c22.016 22.016 57.792 22.08 79.872 0 22.08-22.08 22.016-57.792 0-79.872L551.936 272.448C529.856 250.432 494.144 250.432 472.064 272.448z","p-id":"2328",fill:"#ffffff"})],-1)],w=["disabled"],v=[i("svg",{t:"1570849885759",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2480",width:"20",height:"20"},[i("path",{d:"M472.064 751.552 72.832 352.32c-22.08-22.08-22.08-57.792 0-79.872 22.016-22.016 57.792-22.08 79.872 0L512 631.744l359.296-359.296c22.016-22.016 57.792-22.08 79.872 0 22.08 22.08 22.016 57.792 0 79.872l-399.232 399.232C529.856 773.568 494.144 773.568 472.064 751.552z","p-id":"2481",fill:"#ffffff"})],-1)],x=i("span",null," / ",-1),b={class:"size-control"},D={class:"upload"},k={href:"javascript:;",class:"file-wrapper"},y={key:0},C=[i("svg",{t:"1570849669055",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1120",width:"20",height:"20"},[i("path",{d:"M218.688721 168.644955l-0.013303 0 0-0.014326L218.688721 168.644955l128.45665-0.556679c19.003819 0.508583 36.624129-13.658068 39.493479-37.807071L386.638851 104.19713c-0.474814-20.503986-16.169261-37.442774-35.158754-37.897122l-245.311055 1.561565c-0.37146-0.040932-0.605797-0.186242-0.935302-0.186242l-17.193591-0.412392c-9.494235-0.24764-18.012236 3.756557-24.087605 10.389628-6.151094 6.591115-8.428973 15.797801-8.18031 26.090215l1.843998 18.562774c0 0.37146-1.280156 0.61296-1.280156 1.025353l0.956791 265.449721c0.412392 20.454868 16.121166 32.736589 35.165918 33.190937l25.552979 0c19.003819 0.454348 34.092469-17.359366 33.665751-37.786605l-1.073448-144.370085 169.152515 179.211615c18.377556 19.84293 48.128137 19.84293 66.518996 0 18.329461-19.835767 18.329461-51.897997 0-71.755254L218.688721 168.644955z","p-id":"1121",fill:"#ffffff"}),i("path",{d:"M948.293761 899.895471c-0.034792-0.460488 1.238201-0.722454 1.238201-1.073448l-0.014326-0.007163-0.977257-261.362636c-0.481977-20.441565-16.182564-32.67519-35.186384-33.128515l-24.163329-0.034792c-18.934235-0.467651-34.085306 17.385972-33.603329 37.849026l1.073448 141.253094L687.535899 603.016947c-18.405185-19.850094-48.106648-19.850094-66.49853 0-18.36323 19.835767-18.36323 51.897997 0 71.734788l169.104419 180.25027-128.297015 0.550539c-18.989493-0.454348-36.576033 12.115945-39.493479 36.273135l0 26.083052c0.481977 20.4958 16.237823 37.442774 35.17922 37.951357l242.160295-1.582031c0.391926 0 0.611937 0.164752 0.970094 0.164752l17.173125 0.454348c9.495258 0.240477 18.054191-3.76372 24.115234-10.417257 6.212492-6.529717 8.407484-15.763009 8.222265-26.062586L948.293761 899.895471z","p-id":"1122",fill:"#ffffff"}),i("path",{d:"M386.225435 603.009783l-0.014326 0c-18.36323-19.84907-48.14144-19.84907-66.505693 0L150.561088 782.214235l1.086751-142.119835c0.413416-20.4958-14.675234-38.364773-33.610492-37.849026l-25.574469 0c-19.051915 0.509606-34.745339 12.68695-35.172057 33.183773l-0.99056 263.323291c0 0.37146 1.286296 0.61296 1.286296 1.025353l-1.843998 18.521842c-0.206708 10.299577 2.00875 19.540032 8.167007 26.062586 6.068206 6.653537 14.634302 10.657734 24.067138 10.416234l17.207917-0.454348c0.358157 0 0.578168-0.164752 0.970094-0.164752l245.290589 1.589195c18.989493-0.522909 34.71157-17.455557 35.172057-37.95852l0-26.076912c-2.862187-24.157189-20.482497-36.72032-39.438221-36.273135l-129.955794-0.454348 169.001065-180.24413C404.568199 654.970202 404.568199 622.845551 386.225435 603.009783z","p-id":"1123",fill:"#ffffff"}),i("path",{d:"M941.984055 77.652568c-6.068206-6.632047-14.634302-10.637268-24.115234-10.354835l-17.152658 0.412392c-0.385786 0-0.61296 0.144286-0.99056 0.206708L654.063553 66.333778c-19.017122 0.474814-34.704406 17.414625-35.186384 37.910425l-0.048095 26.090215c2.917446 24.190959 20.565385 38.302351 39.486316 37.841863l130.368186 0.556679L621.181655 347.381755c-18.418488 19.75288-18.418488 51.815109-0.048095 71.6519l0 0.007163c18.377556 19.84293 48.093345 19.84293 66.491367 0l169.132048-180.327018-1.086751 145.471163c-0.461511 20.434401 14.696724 38.309514 33.617655 37.85619l24.163329 0c18.989493-0.522909 34.69008-12.756535 35.172057-33.197076l0.977257-265.512143c0-0.412392-1.258667-0.661056-1.258667-1.032516l1.851161-18.562774C950.391539 93.449345 948.183244 84.237543 941.984055 77.652568z","p-id":"1124",fill:"#ffffff"})],-1)],F={class:"url-input"},L={id:"container",ref:"container"};var S=o(h,[["render",function(o,h,S,T,U,z){return e(),t("div",f,[i("div",p,[i("div",u,[i("div",g,[i("button",{disabled:z.prevDisable,onClick:h[0]||(h[0]=(...e)=>z.prevPage&&z.prevPage(...e))},m,8,P),i("button",{disabled:z.nextDisable,onClick:h[1]||(h[1]=(...e)=>z.nextPage&&z.nextPage(...e))},v,8,w),a(i("input",{type:"text","onUpdate:modelValue":h[2]||(h[2]=e=>U.currentPage=e),onKeyup:h[3]||(h[3]=s(((...e)=>z.changePage&&z.changePage(...e)),["enter"]))},null,544),[[n,U.currentPage]]),x,i("span",null,l(U.pdfData.numPages),1)]),i("div",b,[i("button",{onClick:h[4]||(h[4]=e=>z.resize("add"))},"+"),i("button",{onClick:h[5]||(h[5]=e=>z.resize("minus"))},"-"),i("p",null,"当前放大比例："+l(U.scale|o.toFixed),1)]),i("div",D,[i("a",{href:"javascript:;",class:"file-wrapper",onClick:h[6]||(h[6]=e=>U.isUrlInputShow=!0)}," 输入路径 "),i("a",k,[r(" 选择文件 "),i("input",{ref:"pdfFile",type:"file",accept:"application/pdf",onChange:h[7]||(h[7]=(...e)=>z.handleUpload&&z.handleUpload(...e))},null,544)]),""!==U.fileName?(e(),t("span",y,"当前文件(本地上传)："+l(U.fileName),1)):c("",!0)]),i("div",{class:"full-screen",onClick:h[8]||(h[8]=(...e)=>z.fullscreen&&z.fullscreen(...e))},C)]),a(i("div",F,[a(i("input",{type:"text","onUpdate:modelValue":h[9]||(h[9]=e=>U.url=e)},null,512),[[n,U.url]]),i("button",{onClick:h[10]||(h[10]=(...e)=>z.submit&&z.submit(...e))},"确定")],512),[[d,U.isUrlInputShow]]),i("div",L,null,512)])])}]]);export{S as default};

var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,o=(e,a)=>{for(var l in a||(a={}))i.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))n.call(a,l)&&r(e,l,a[l]);return e},d=(e,t)=>a(e,l(t));import{M as s,N as u,O as c,P as v}from"./gjdc.b3af9cfa.js";import{r as p,S as m,b,c as g,d as k,w as f,A as y,k as h,l as w,B as C,U as x,Y as _,n as N,j as P,e as D,f as V,u as O}from"./vendor.cc783c3b.js";import{m as T}from"./index.143fdacc.js";const U={__name:"dialogInfo",props:{visible:{type:Boolean,default:!1},detailData:{type:Object,default:{}}},emits:["close"],setup(e,{emit:a}){const l=e,{appContext:t}=_(),i=t.config.globalProperties,n=p([]),r=p(0),c=p(1),v=p(20),P=p({}),D=p(!1),V=e=>{if(!l.detailData.areaCode||""==l.detailData.areaCode)return!1;"number"==typeof e&&(c.value=e);const a=d(o({},l.detailData),{pageNum:c.value,operateType:i.$consts.OPTYPE_QUERY});P.value=a,s(a).then((e=>{n.value=e.data.data.list,r.value=e.data.data.total}))};m((()=>l.visible),(e=>{e&&V()}),{deep:!0,immediate:!0});const O=()=>{a("close",!0)},T=()=>{P.value?0!=n.value.length?D.value=!0:N.error("暂无需要导出的数据！"):N.error("查询后才可以导出！")},U=()=>{D.value=!1},S=()=>{let e=d(o({},l.detailData),{areaCode:l.detailData.areaCode,overDay:l.detailData.overDay,areaName:l.detailData.areaName,pageNum:c.value,operateType:i.$consts.OPTYPE_OUTPUT});u(e)};return(a,l)=>{const t=b("ss-pagination"),i=b("ss-custom-button"),o=b("el-table-column"),d=b("ss-table"),s=b("ss-export-dialog"),u=b("el-dialog");return g(),k(u,{title:"详细列表",modelValue:e.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>x(visible)?visible.value=e:null),width:"70%","before-close":O,"close-on-click-modal":!1,class:"userManageFormDialog","append-to-body":!0},{default:f((()=>[y("div",null,[h(t,{total:r.value,pageIndex:c.value,pageSize:v.value,onPageChange:V,style:{width:"calc(100% - 130px)",float:"left"}},null,8,["total","pageIndex","pageSize"]),h(i,{type:"output",onClick:T,style:{display:"inline-block",float:"right","margin-right":"16px"}})]),h(d,{data:n.value,maxHeight:400,class:"xgRptZL-table"},{default:f((()=>[h(o,{align:"center",type:"index","min-width":"60",label:"序号"},{default:f((e=>[w(C((c.value-1)*v.value+e.$index+1),1)])),_:1}),h(o,{prop:"fchildno",align:"center","min-width":"200",label:"预防接种档案编号"}),h(o,{prop:"name",align:"center","min-width":"150",label:"姓名"}),h(o,{prop:"sex",align:"center","min-width":"55",label:"性别"}),h(o,{prop:"birth",align:"center","min-width":"120",label:"出生日期"}),h(o,{prop:"stationName",align:"center","min-width":"200",label:"所属接种点名称","show-overflow-tooltip":""}),h(o,{prop:"newBaseCode",align:"center","min-width":"120",label:"客户端识别码"}),h(o,{prop:"bookingDate",align:"center",width:"170",label:"登记日期"}),h(o,{prop:"nationality",align:"center","min-width":"100",label:"国籍"}),h(o,{prop:"crowdkind",align:"center","min-width":"200",label:"人群分类","show-overflow-tooltip":""}),h(o,{prop:"cidtype",align:"center","min-width":"100",label:"证件类型"}),h(o,{prop:"cid",align:"center",width:"150",label:"身份证件号"})])),_:1},8,["data"]),h(s,{onCallback:S,onHandleClose:U,total:r.value,typeStr:"新冠病毒疫苗基本信息质量控制报表详细列表",dialogVisible:D.value},null,8,["total","dialogVisible"])])),_:1},8,["modelValue"])}}},S={class:"condition-row"},j={class:"item"},I=y("span",{class:"label required"},"选择地区：",-1),$={class:"item"},E={class:"item"},A={key:0},L=["onClick"],Y={key:1},q={key:0},M=["onClick"],z={key:1},B={key:0},H=["onClick"],R={key:1},F={key:0},Q=["onClick"],Z={key:1},G={key:0},J=["onClick"],K={key:1},W={key:0},X=["onClick"],ee={key:1},ae={key:0},le=["onClick"],te={key:1},ie={key:0},ne=["onClick"],re={key:1},oe={__name:"index",setup(e){const a=T(),{appContext:l}=_(),t=l.config.globalProperties,i=p([t.$dateUtil.dayAddNum(t.$dateUtil.getMonthDayNum(t.$dateUtil.lastMonthStartDay())),t.$dateUtil.currentDate()]),n=p([t.$dateUtil.dayAddNum(7),t.$dateUtil.currentDate()]),r=p([]),s=p(null),u=p(0),m=p(!1),oe=p({}),de=p(""),se=p(null);let ue=P({areaId:a.userInfo.areaId,areaCode:a.userInfo.areaCode,areaName:a.userInfo.areaName,selectAreaLevel:sessionStorage.getItem("currentLevel"),skipValue:String(Number(sessionStorage.getItem("currentLevel"))+1)});const ce=e=>{s.value.setheight()},ve=e=>{ue=e,ue.skipValue=String(Number(ue.selectAreaLevel)+1)},pe=e=>{ue.skipValue=e},me=()=>{let e=i.value[0]||"",l=i.value[1]||"";if(!e||""==e||!l||""==l)return N.error("接种日期为必填项，请填写完整再查询！"),!1;let o=n.value[0]||"",d=n.value[1]||"";if(!o||""==o||!d||""==d)return N.error("出生日期为必填项，请填写完整再查询！"),!1;let s={areaCode:ue.areaCode,areaName:ue.areaName,skipLevel:ue.skipValue,birthStart:o,birthEnd:d,jzrqStart:e,jzrqEnd:l,operateType:t.$consts.OPTYPE_QUERY,cModId:a.moduleId};se.value=s,de.value=ue.areaName+" "+ue.areaCode,c(s).then((e=>{r.value=e.data.data,u.value=e.data.sec})).catch((()=>{}))},be=()=>{if(!se.value)return void N.error("查询后才可以导出！");if(1===r.value.length)return void N.error("暂无需要导出的数据！");se.value.selectAreaName=de.value;let e=d(o({},se.value),{operateType:t.$consts.OPTYPE_OUTPUT});v(e)},ge=(e,a)=>{let l=e,t=l.areaCode;if(!t||""==t)return N.error("所选中的行的区划代码为空！"),!1;let i=l.areaName;"合计"==i&&(i=de.value),oe.value=d(o({},se.value),{selectAreaCode:t,queryType:a,selectAreaName:i}),m.value=!0},ke=()=>{m.value=!1};return(e,a)=>{const l=b("ss-area-areaTreeStation"),t=b("ss-date-range"),o=b("ss-custom-button"),d=b("ss-query-bottom"),c=b("ss-condition-area"),v=b("el-table-column"),p=b("ss-table");return g(),D("div",null,[h(c,{onSetConditionFlag:ce},{default:f((()=>[y("div",S,[y("div",j,[I,h(l,{modelValue:O(ue),"onUpdate:modelValue":a[0]||(a[0]=e=>x(ue)?ue.value=e:ue=e),getToLevelNum:5,onNodeClick:ve,showSelect:!0,onSelectClick:pe},null,8,["modelValue"])]),y("div",$,[h(t,{title:"接种日期",defaultValue:i.value,"onUpdate:defaultValue":a[1]||(a[1]=e=>i.value=e)},null,8,["defaultValue"])]),y("div",E,[h(t,{title:"出生日期",defaultValue:n.value,"onUpdate:defaultValue":a[2]||(a[2]=e=>n.value=e)},null,8,["defaultValue"])])]),h(d,{secTime:u.value},{default:f((()=>[h(o,{type:"query",onClick:me}),h(o,{type:"output",onClick:be})])),_:1},8,["secTime"])])),_:1}),h(p,{data:r.value,ref_key:"tabPage",ref:s},{default:f((()=>[h(v,{prop:"areaName",align:"center","min-width":"250",label:"地区"},{default:f((({row:e})=>[w(C(e.areaName+" "+e.areaCode),1)])),_:1}),h(v,{align:"center",label:"总体数据情况（人数）"},{default:f((()=>[h(v,{prop:"childCount",align:"center","min-width":"90",label:"总数"}),h(v,{align:"center","min-width":"100",label:"不合格数"},{default:f((({row:e})=>[e.all&&e.all>0?(g(),D("div",A,[y("div",{class:"link-text",onClick:a=>ge(e,"all")},C(e.all),9,L)])):(g(),D("div",Y,C(e.all),1))])),_:1}),h(v,{prop:"allHgrate",align:"center","min-width":"150",label:"合格率"})])),_:1}),h(v,{align:"center",label:"单项不合格数（人数）"},{default:f((()=>[h(v,{align:"center","min-width":"100",label:"受种者姓名"},{default:f((({row:e})=>[e.name&&e.name>0?(g(),D("div",q,[y("div",{class:"link-text",onClick:a=>ge(e,"name")},C(e.name),9,M)])):(g(),D("div",z,C(e.name),1))])),_:1}),h(v,{align:"center","min-width":"100",label:"证件类型"},{default:f((({row:e})=>[e.cid&&e.cid>0?(g(),D("div",B,[y("div",{class:"link-text",onClick:a=>ge(e,"cid")},C(e.cid),9,H)])):(g(),D("div",R,C(e.cid),1))])),_:1}),h(v,{align:"center","min-width":"100",label:"性别"},{default:f((({row:e})=>[e.sex&&e.sex>0?(g(),D("div",F,[y("div",{class:"link-text",onClick:a=>ge(e,"sex")},C(e.sex),9,Q)])):(g(),D("div",Z,C(e.sex),1))])),_:1}),h(v,{align:"center","min-width":"100",label:"出生日期"},{default:f((({row:e})=>[e.birth&&e.birth>0?(g(),D("div",G,[y("div",{class:"link-text",onClick:a=>ge(e,"birth")},C(e.birth),9,J)])):(g(),D("div",K,C(e.birth),1))])),_:1}),h(v,{align:"center","min-width":"100",label:"国籍"},{default:f((({row:e})=>[e.nationality&&e.nationality>0?(g(),D("div",W,[y("div",{class:"link-text",onClick:a=>ge(e,"nationality")},C(e.nationality),9,X)])):(g(),D("div",ee,C(e.nationality),1))])),_:1}),h(v,{align:"center","min-width":"100",label:"人群分类"},{default:f((({row:e})=>[e.crowdkind&&e.crowdkind>0?(g(),D("div",ae,[y("div",{class:"link-text",onClick:a=>ge(e,"crowdkind")},C(e.crowdkind),9,le)])):(g(),D("div",te,C(e.crowdkind),1))])),_:1}),h(v,{align:"center","min-width":"100",label:"重复档案"},{default:f((({row:e})=>[e.samecard&&e.samecard>0?(g(),D("div",ie,[y("div",{class:"link-text",onClick:a=>ge(e,"samecard")},C(e.samecard),9,ne)])):(g(),D("div",re,C(e.samecard),1))])),_:1})])),_:1})])),_:1},8,["data"]),m.value?(g(),k(U,{key:0,visible:m.value,onClose:ke,detailData:oe.value},null,8,["visible","detailData"])):V("",!0)])}}};export{oe as default};

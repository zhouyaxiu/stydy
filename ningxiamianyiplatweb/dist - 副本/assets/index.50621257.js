import{Y as e,Z as a}from"./gjdc.b3af9cfa.js";import{m as l}from"./index.143fdacc.js";import{Y as t,r,j as s,o,b as i,c as n,e as d,k as u,w as p,A as c,u as m,U as b}from"./vendor.cc783c3b.js";const h={class:"condition-row"},v={class:"item"},f=c("span",{class:"label"},"选择地区：",-1),g={class:"item"},j=c("span",{class:"label"},"截止日期：",-1),y={class:"item"},C=c("span",{class:"label"},"生产企业：",-1),T={__name:"index",setup(T){const{appContext:N}=t(),W=N.config.globalProperties,w=l(),I=r(),V=r(0),k=r(),S=s([{label:"接种人群",prop:"pageAge",minWidth:"90"},{label:"地区",prop:"areaName",minWidth:"200"},{label:"疫苗生产企业",prop:"factoryName",minWidth:"120"},{label:"基础免疫第一剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"jc1dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"jc1lj",minWidth:"120"}]},{label:"基础免疫第二剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"jc2dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"jc2lj",minWidth:"120"}]},{label:"加强接种第三剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"jq3dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"jq3lj",minWidth:"120"}]},{label:"加强接种第四剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"jq4dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"jq4lj",minWidth:"120"}]},{label:"未感染第五剂",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：人）",prop:"wgr5dr",minWidth:"120"},{label:"累计接种人数（单位：人）",prop:"wgr5lj",minWidth:"120"}]},{label:"已感染人群",hasChildrenTitle:!0,list:[{label:"当日接种人数（单位：剂次）",prop:"ygrdr",minWidth:"140"},{label:"累计接种人数（单位：剂次）",prop:"ygrlj",minWidth:"140"}]}]),L=r(null);let U=s({areaId:w.userInfo.areaId,areaCode:w.userInfo.areaCode,areaName:w.userInfo.areaName,selectAreaLevel:sessionStorage.getItem("currentLevel"),skipValue:String(Number(sessionStorage.getItem("currentLevel"))+1)});const $=r([W.$dateUtil.dayAddNum(8),W.$dateUtil.dayAddNum(1)]),_=()=>{let a=$.value[0],l=$.value[1];if(!a||!l)return W.$util.showMsg("请选择填报日期范围！","error",5e3,!0);if(!k.value.fenterNo)return W.$util.showMsg("请选择生产企业！","error",5e3,!0);const t={areaCode:U.areaCode,areaName:U.areaName,skipLevel:U.skipValue,startDate:a,endDate:l,factoryId:k.value.fenterNo.join(","),operateType:W.$consts.OPTYPE_QUERY,cModId:w.moduleId};L.value=t,e(t).then((e=>{I.value=e.data.data,V.value=e.data.sec}))},q=e=>{U=e,U.skipValue=String(Number(U.selectAreaLevel)+1)},x=e=>{U.skipValue=e},A=()=>{if(!L.value||L.value.areaCode!=U.areaCode)return W.$util.showMsg("查询后才可以导出！","error",5e3,!0);let e=JSON.parse(JSON.stringify(L.value));e.operateType=W.$consts.OPTYPE_OUTPUT,a(e)},P=({row:e,column:a,rowIndex:l,columnIndex:t})=>{if(0==t||2==t){const t=e[a.property];if(t){const e=I.value[l-1];let r=I.value[l+1];if(e&&e[a.property]===t)return{rowspan:0,colspan:0};{let e=1;for(;r&&r[a.property]===t;)e++,r=I.value[e+l];if(e>1)return{rowspan:e,colspan:1}}}}};return o((()=>{})),(e,a)=>{const l=i("ss-area-areaTreeStation"),t=i("ss-date-range-new"),r=i("ss-all-vaccine-vendor"),s=i("ss-custom-button"),o=i("ss-query-bottom"),T=i("ss-condition-area"),N=i("ss-custom-table");return n(),d("div",null,[u(T,null,{default:p((()=>[c("div",h,[c("div",v,[f,u(l,{modelValue:m(U),"onUpdate:modelValue":a[0]||(a[0]=e=>b(U)?U.value=e:U=e),getToLevelNum:5,showSelect:!0,onNodeClick:q,onSelectClick:x},null,8,["modelValue"])]),c("div",g,[j,u(t,{defaultValue:$.value,"onUpdate:defaultValue":a[1]||(a[1]=e=>$.value=e)},null,8,["defaultValue"])]),c("div",y,[C,u(r,{ref_key:"selectedVaccineVendor",ref:k,type:0},null,512)])]),u(o,{statisTics:!0,secTime:V.value},{default:p((()=>[u(s,{type:"query",onClick:_}),u(s,{type:"output",onClick:A})])),_:1},8,["secTime"])])),_:1}),u(N,{tableData:I.value,columnList:S,spanMethod:P},null,8,["tableData","columnList"])])}}};export{T as default};

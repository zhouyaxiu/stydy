var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{S as i,T as n}from"./gjdc.b3af9cfa.js";import{m as u}from"./index.143fdacc.js";import{Y as d,r as c,j as m,b as p,c as v,e as b,k as f,w as g,d as h,f as y,A as T,u as C,U as j,n as O}from"./vendor.cc783c3b.js";const S={class:"condition-row"},V={class:"item"},I=T("span",{class:"label required"},"选择地区：",-1),N={class:"item"},A={class:"item"},D={__name:"index",setup(e){const D=u(),{appContext:L}=d(),P=L.config.globalProperties,U=c([P.$dateUtil.dayAddNum(7),P.$dateUtil.currentDate()]),k=c([P.$dateUtil.getAfterNYearsDateStr(-1),P.$dateUtil.currentDate()]),w=c([]),W=c(null);let _=c(0);const E=c(""),$=c(!1),q=m([{label:"地区",prop:"area_name",minWidth:"100"},{label:"不合格项",hasChildrenTitle:!0,list:[{label:"非中国国籍",prop:"msg1",minWidth:"100"},{label:"中国国籍使用台湾居民来往内地通行证",prop:"msg2",minWidth:"260"},{label:"中国国籍身份信息暂未获取",prop:"msg3",minWidth:"160"},{label:"疫苗批号异常",prop:"msg4",minWidth:"140"},{label:"未提供疫苗追溯码",prop:"msg5",minWidth:"140"},{label:"追溯码出现次数大于包装盒剂次",prop:"msg6",minWidth:"200"}]}]),Y=c(null);let x=m({areaId:D.userInfo.areaId,areaCode:D.userInfo.areaCode,areaName:D.userInfo.areaName,selectAreaLevel:sessionStorage.getItem("currentLevel"),skipValue:String(Number(sessionStorage.getItem("currentLevel"))+1)});const z=e=>{W.value.setheight()},F=e=>{x=e,x.skipValue=String(Number(x.selectAreaLevel)+1)},M=e=>{x.skipValue=e},Q=()=>{let e=U.value[0]||"",a=U.value[1]||"";if(!e||""==e||!a||""==a)return O.error("接种日期为必填项，请填写完整再查询！"),!1;let t=k.value[0]||"",l=k.value[1]||"";if(!t||""==t||!l||""==l)return O.error("出生日期为必填项，请填写完整再查询！"),!1;let r={selectAreaId:x.areaId,selectAreaCode:x.areaCode,selectAreaName:x.areaName,selectAreaLevel:x.selectAreaLevel,selectType:x.skipValue,birthStartTime:t,birthEndTime:l,jzrqStartTime:e,jzrqEndTime:a,operateType:P.$consts.OPTYPE_QUERY,cModId:D.moduleId};Y.value=r,E.value=x.areaName+" "+x.areaCode,i(r).then((e=>{dataList=e.data,_=e.sec})).catch((()=>{}))},R=()=>{if(!searchDataa.value)return void O.error("查询后才可以导出！");if(1===dataList.length)return void O.error("暂无需要导出的数据！");Y.value.selectAreaName=E.value;let e=(i=((e,a)=>{for(var t in a||(a={}))r.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))s.call(a,t)&&o(e,t,a[t]);return e})({},Y.value),u={operateType:P.$consts.OPTYPE_OUTPUT},a(i,t(u)));var i,u;n(e)},B=(e,a)=>{Y.messageType=e,Y.childCount=a,$.value=!0},G=()=>{$.value=!1};return(e,a)=>{const t=p("ss-area-areaTreeStation"),l=p("ss-date-range"),r=p("ss-custom-button"),s=p("ss-query-bottom"),o=p("ss-condition-area"),i=p("ss-custom-table"),n=p("dialog-info");return v(),b("div",null,[f(o,{onSetConditionFlag:z},{default:g((()=>[T("div",S,[T("div",V,[I,f(t,{modelValue:C(x),"onUpdate:modelValue":a[0]||(a[0]=e=>j(x)?x.value=e:x=e),getToLevelNum:5,onNodeClick:F,showSelect:!0,onSelectClick:M},null,8,["modelValue"])]),T("div",N,[f(l,{title:"接种日期",defaultValue:U.value,"onUpdate:defaultValue":a[1]||(a[1]=e=>U.value=e)},null,8,["defaultValue"])]),T("div",A,[f(l,{title:"出生日期",defaultValue:k.value,"onUpdate:defaultValue":a[2]||(a[2]=e=>k.value=e)},null,8,["defaultValue"])])]),f(s,{secTime:C(_)},{default:g((()=>[f(r,{type:"query",onClick:Q}),f(r,{type:"output",onClick:R})])),_:1},8,["secTime"])])),_:1}),f(i,{tableData:w.value,columnList:q,onOpenDetailDialog:B},null,8,["tableData","columnList"]),$.value?(v(),h(n,{key:0,visible:$.value,onClose:G,searchData:Y.value},null,8,["visible","searchData"])):y("",!0)])}}};export{D as default};

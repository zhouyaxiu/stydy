var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,u=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))s.call(a,t)&&o(e,t,a[t]);return e},n=(e,l)=>a(e,t(l));import{S as i,T as c}from"./gjdc.b3af9cfa.js";import{m as d}from"./index.143fdacc.js";import{Y as p,r as m,j as v,b as f,c as b,e as g,k as y,w as T,A as j,u as C,U as N,n as O}from"./vendor.cc783c3b.js";const V={class:"condition-row"},I={class:"item"},S=j("span",{class:"label required"},"选择地区：",-1),A={class:"item"},L={class:"item"},P={__name:"index",setup(e){const a=d(),{appContext:t}=p(),l=t.config.globalProperties,r=m([l.$dateUtil.dayAddNum(7),l.$dateUtil.currentDate()]),s=m([l.$dateUtil.getAfterNYearsDateStr(-1),l.$dateUtil.currentDate()]),o=m([]);m(null);let P=m(0);const U=m(""),h=v([{label:"地区",prop:"area_name",minWidth:"180"},{label:"地区编码",prop:"area_code"},{label:"合格接种剂次数",prop:"jcCount",minWidth:"120",type:"clickable"},{label:"合格接种人数",prop:"personCount"}]),k=m(!1),D=m(null);let _=v({areaId:a.userInfo.areaId,areaCode:a.userInfo.areaCode,areaName:a.userInfo.areaName,selectAreaLevel:sessionStorage.getItem("currentLevel"),skipValue:String(Number(sessionStorage.getItem("currentLevel"))+1)});const w=e=>{_=e,_.skipValue=String(Number(_.selectAreaLevel)+1)},E=e=>{_.skipValue=e},$=()=>{let e=r.value[0]||"",t=r.value[1]||"";if(!e||""==e||!t||""==t)return O.error("接种日期为必填项，请填写完整再查询！");let o=s.value[0]||"",u=s.value[1]||"";if(!o||""==o||!u||""==u)return O.error("出生日期为必填项，请填写完整再查询！");let n={selectAreaId:_.areaId,selectAreaCode:_.areaCode,selectAreaName:_.areaName,selectAreaLevel:_.selectAreaLevel,selectType:_.skipValue,birthStartTime:o,birthEndTime:u,jzrqStartTime:e,jzrqEndTime:t,operateType:l.$consts.OPTYPE_QUERY,cModId:a.moduleId};D.value=n,U.value=_.areaName+" "+_.areaCode,i(n).then((e=>{dataList=e.data,P=e.sec})).catch((()=>{}))},q=()=>{if(!searchDataa.value)return void O.error("查询后才可以导出！");if(1===dataList.length)return void O.error("暂无需要导出的数据！");D.value.selectAreaName=U.value;let e=n(u({},D.value),{operateType:l.$consts.OPTYPE_OUTPUT});c(e)},Y=(e,a)=>{detailData.value=n(u({},D.value),{professionCode:"合计"==e.professionName?"-1":a.slice(-1),fbactid:a.slice(-1)}),k.value=!0};return(e,a)=>{const t=f("ss-area-areaTreeStation"),l=f("ss-date-range"),u=f("ss-custom-button"),n=f("ss-query-bottom"),i=f("ss-condition-area"),c=f("ss-custom-table");return b(),g("div",null,[y(i,null,{default:T((()=>[j("div",V,[j("div",I,[S,y(t,{modelValue:C(_),"onUpdate:modelValue":a[0]||(a[0]=e=>N(_)?_.value=e:_=e),getToLevelNum:5,onNodeClick:w,showSelect:!0,onSelectClick:E},null,8,["modelValue"])]),j("div",A,[y(l,{title:"接种日期",defaultValue:r.value,"onUpdate:defaultValue":a[1]||(a[1]=e=>r.value=e)},null,8,["defaultValue"])]),j("div",L,[y(l,{title:"出生日期",defaultValue:s.value,"onUpdate:defaultValue":a[2]||(a[2]=e=>s.value=e)},null,8,["defaultValue"])])]),y(n,{secTime:C(P)},{default:T((()=>[y(u,{type:"query",onClick:$}),y(u,{type:"output",onClick:q})])),_:1},8,["secTime"])])),_:1}),y(c,{tableData:o.value,columnList:h,onOpenDetailDialog:Y},null,8,["tableData","columnList"])])}}};export{P as default};

var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{m as n,n as i}from"./gjdc.b3af9cfa.js";import{r as u,b as d,c as p,e as m,A as c,k as v,l as b,w as f,I as g,J as h,u as j,d as V,B as y,Y as N,j as C,U as W}from"./vendor.cc783c3b.js";import{m as k}from"./index.143fdacc.js";const w={class:"label",style:{display:"flex","align-items":"center"}},O={__name:"ageGroup",props:{ageData:{type:Array,default:()=>({})}},emits:"update:modelValue",setup(e,{emit:a}){const l=e,{appContext:t}=N(),r=t.config.globalProperties,o=u(!1),s=u(!1),n=r.$commonOptions.agesList,i=e=>{W.value=e?n:[],s.value=!1,a("update:modelValue",W.value)},C=e=>{const l=e.length;W.value=e,s.value=l>0&&l<n.length,0==l&&(o.value=!1),a("update:modelValue",W.value)},W=u(l.ageData);return(e,a)=>{const l=d("el-checkbox"),t=d("el-checkbox-group");return p(),m(g,null,[c("span",w,[v(l,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),indeterminate:s.value,onChange:i},null,8,["modelValue","indeterminate"]),b("  年龄组： ")]),v(t,{modelValue:W.value,"onUpdate:modelValue":a[1]||(a[1]=e=>W.value=e),onChange:C,disabled:!o.value},{default:f((()=>[(p(!0),m(g,null,h(j(n),(e=>(p(),V(l,{label:e,key:e.id,value:e},{default:f((()=>[b(y(e.name),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])],64)}}},T={class:"condition-row"},S={class:"item"},L=c("span",{class:"label required"},"地区：",-1),D={class:"item"},P=c("span",{class:"label required"},"接种日期：",-1),U={class:"item"},_=c("span",{class:"label"},"疫苗生产企业：",-1),I={class:"condition-row"},x={class:"item"},$={__name:"index",setup(e){const{appContext:b}=N(),g=b.config.globalProperties,h=k(),V=u([]),y=u(0),w=u([]),$=u(null),A=C([{label:"地区",prop:"areaName",minWidth:"250",overflowTip:!0,formatter:function(e){return"合计"==e.areaName?e.areaCode:e.areaName+" "+e.areaCode.slice(0,10)}},{label:"累计接种人数（人）",hasChildrenTitle:!0,list:[{label:"合计",prop:"lj",minWidth:"100"},{label:"第1剂",prop:"lj1",minWidth:"100"},{label:"第2剂",prop:"lj2",minWidth:"100"},{label:"第3剂",prop:"lj3",minWidth:"100"},{label:"第4剂",prop:"lj4",minWidth:"100"},{label:"第5剂",prop:"lj5",minWidth:"100"},{label:"第6剂",prop:"lj6",minWidth:"100"}]},{label:"当日接种人数（人）",hasChildrenTitle:!0,list:[{label:"合计",prop:"dr",minWidth:"100"},{label:"第1剂",prop:"dr1",minWidth:"100"},{label:"第2剂",prop:"dr2",minWidth:"100"},{label:"第3剂",prop:"dr3",minWidth:"100"},{label:"第4剂",prop:"dr4",minWidth:"100"},{label:"第5剂",prop:"lj5",minWidth:"100"},{label:"第6剂",prop:"lj6",minWidth:"100"}]},{label:"开展新冠疫苗接种单位数",hasChildrenTitle:!0,list:[{label:"当日",prop:"drStationcode",minWidth:"100"},{label:"累计",prop:"ljStationcode",minWidth:"100"}]}]),M=u(null);let q=C({areaId:h.userInfo.areaId,areaCode:h.userInfo.areaCode,selectAreaLevel:sessionStorage.getItem("currentLevel"),skipValue:String(Number(sessionStorage.getItem("currentLevel"))+1),areaName:h.userInfo.areaName});const G=u([g.$dateUtil.dayAddNum(7),g.$dateUtil.currentDate()]),J=()=>{let e=G.value[0],i=G.value[1];if(!e||!i)return g.$util.showMsg("请选择填报日期范围！","error",5e3,!0);let u=w.value.map((e=>e.id)).join(",");const d={areaCode:q.areaCode,areaLevel:q.selectAreaLevel,showLevel:"5"==q.skipValue?4:q.skipValue,startDate:e,endDate:i,ageGroup:u,fenterNo:$.value.fenterNo};let p=w.value.map((e=>e.name)).join(",");var m,c;M.value=(m=((e,a)=>{for(var l in a||(a={}))r.call(a,l)&&s(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&s(e,l,a[l]);return e})({},d),c={fenterName:$.value.fenterName,areaName:q.areaName,ageGroupName:p},a(m,l(c))),n(d).then((e=>{200===e.data.code?(V.value=e.data.data.data,y.value=e.data.data.sec):e.data.popMsg&&(y.value="",V.value=[],g.$util.showMsg(e.data.popMsg,"error"))}))},E=e=>{q=e,q.skipValue=String(Number(q.selectAreaLevel)+1)},Y=e=>{q.skipValue=e},B=()=>{if(!M.value||M.value.areaCode!=q.areaCode)return g.$util.showMsg("查询后才可以导出！","error",5e3,!0);let e=JSON.parse(JSON.stringify(M.value));e.areaName=e.areaName+" "+e.areaCode.slice(0,10),e.operateType=g.$consts.OPTYPE_OUTPUT,i(e)};return(e,a)=>{const l=d("ss-area-areaTreeStation"),t=d("ss-date-range-new"),r=d("ss-vaccine-vendor"),o=d("ss-custom-button"),s=d("ss-query-bottom"),n=d("ss-condition-area"),i=d("ss-custom-table");return p(),m("div",null,[v(n,null,{default:f((()=>[c("div",T,[c("div",S,[L,v(l,{modelValue:j(q),"onUpdate:modelValue":a[0]||(a[0]=e=>W(q)?q.value=e:q=e),getToLevelNum:5,showSelect:!0,onNodeClick:E,onSelectClick:Y},null,8,["modelValue"])]),c("div",D,[P,v(t,{defaultValue:G.value,"onUpdate:defaultValue":a[1]||(a[1]=e=>G.value=e)},null,8,["defaultValue"])]),c("div",U,[_,v(r,{ref_key:"selectedVaccineVendor",ref:$},null,512)])]),c("div",I,[c("div",x,[v(O,{ageData:w.value,"onUpdate:modelValue":a[2]||(a[2]=e=>w.value=e)},null,8,["ageData"])])]),v(s,{statisTics:!1,secTime:y.value},{default:f((()=>[v(o,{type:"query",onClick:J}),v(o,{type:"output",onClick:B})])),_:1},8,["secTime"])])),_:1}),v(i,{tableData:V.value,columnList:A},null,8,["tableData","columnList"])])}}};export{$ as default};

var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,s=(e,a)=>{for(var l in a||(a={}))i.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&r(e,l,a[l]);return e},n=(e,t)=>a(e,l(t));import{e as d,f as p,h as u,i as c}from"./gjdc.b3af9cfa.js";import{r as b,j as m,S as v,b as h,c as f,e as y,k as g,w as W,f as T,A as C,U as j,I as w,Y as N,o as k,d as D,u as O}from"./vendor.cc783c3b.js";import{m as V}from"./index.143fdacc.js";const x={key:0,style:{position:"absolute",top:"92px",right:"40px"}},P={style:{margin:"-16px"}},I={__name:"dialogInfo",props:{visible:{type:Boolean,default:!1},detailData:{type:Object,default:{}},detailOtherData:{type:Object,default:{}}},emits:["close"],setup(e,{emit:a}){const l=e,{appContext:t}=N(),i=t.config.globalProperties,o=b([]),r=b(0),u=b("1"),c=b(20),k=b(!1),D=m([{label:"序号",type:"index",minWidth:"80"},{label:"姓名",prop:"name",minWidth:"140",overflowTip:!0},{label:"性别",prop:"sex",minWidth:"80"},{label:"出生日期",prop:"birth",minWidth:"100"},{label:"工作单位",prop:"fchildUnitName",minWidth:"100",overflowTip:!0},{label:"人群分类",prop:"fcrowdKindName",minWidth:"160",overflowTip:!0},{label:"联系电话",prop:"mobPhone",minWidth:"120"},{label:"第1剂次",hasChildrenTitle:!0,list:[{label:"接种日期",prop:"jzrq1",minWidth:"100"},{label:"接种人员",prop:"jzys1",minWidth:"100",overflowTip:!0},{label:"接种单位",prop:"fstationName1",minWidth:"160",overflowTip:!0}]},{label:"第2剂次",hasChildrenTitle:!0,list:[{label:"接种日期",prop:"jzrq2",minWidth:"100"},{label:"接种人员",prop:"jzys2",minWidth:"100",overflowTip:!0},{label:"接种单位",prop:"fstationName2",minWidth:"160",overflowTip:!0}]},{label:"第3剂次",hasChildrenTitle:!0,list:[{label:"接种日期",prop:"jzrq3",minWidth:"100"},{label:"接种人员",prop:"jzys3",minWidth:"100",overflowTip:!0},{label:"接种单位",prop:"fstationName3",minWidth:"160",overflowTip:!0}]},{label:"第4剂次",hasChildrenTitle:!0,list:[{label:"接种日期",prop:"jzrq4",minWidth:"100"},{label:"接种人员",prop:"jzys4",minWidth:"100",overflowTip:!0},{label:"接种单位",prop:"fstationName4",minWidth:"160",overflowTip:!0}]},{label:"第5剂次",hasChildrenTitle:!0,list:[{label:"接种日期",prop:"jzrq5",minWidth:"100"},{label:"接种人员",prop:"jzys5",minWidth:"100",overflowTip:!0},{label:"接种单位",prop:"fstationName5",minWidth:"160",overflowTip:!0}]}]),O=e=>{"number"==typeof e&&(u.value=e);const a=n(s({},l.detailData),{pageIndex:u.value});d(a).then((e=>{if(200!=e.data.code)return o.value=[],r.value=0,i.$util.showMsg(e.data.popMsg,"error",5e3,!0);o.value=e.data.data.data.list,r.value=e.data.data.data.total}))};v((()=>l.visible),(e=>{e&&O()}),{deep:!0,immediate:!0});const V=()=>{a("close",!0)},I=()=>{k.value=!0},S=e=>{let a=n(s(s({},l.detailData),l.detailOtherData),{areaName:l.detailOtherData.areaName+" "+l.detailData.areaCode.slice(0,10),pageIndex:e,operateType:i.$consts.OPTYPE_OUTPUT});p(a)},z=()=>{k.value=!1};return(a,l)=>{const t=h("ss-pagination"),i=h("ss-custom-button"),s=h("ss-custom-table"),n=h("el-dialog"),d=h("ss-export-dialog");return f(),y(w,null,[g(n,{title:"按人群分类的新冠病毒疫苗接种信息汇总表详情",modelValue:e.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>j(visible)?visible.value=e:null),width:"1200","before-close":V,"close-on-click-modal":!1,class:"userManageFormDialog","append-to-body":!0},{default:W((()=>[g(t,{total:r.value,pageIndex:u.value,pageSize:c.value,onPageChange:O},null,8,["total","pageIndex","pageSize"]),r.value?(f(),y("div",x,[g(i,{type:"output",onClick:I})])):T("",!0),C("div",P,[g(s,{tableData:o.value,columnList:D},null,8,["tableData","columnList"])])])),_:1},8,["modelValue"]),g(d,{onCallback:S,onHandleClose:z,total:r.value,typeStr:"按人群分类的新冠病毒疫苗接种信息汇总表详情导出",dialogVisible:k.value},null,8,["total","dialogVisible"])],64)}}};const S={class:"crowed"},z={class:"condition-row"},U={class:"item"},L=C("span",{class:"label required"},"填报单位：",-1),q={class:"item"},_=C("span",{class:"label required"},"填报日期：",-1),M={class:"item"},$=C("span",{class:"label required"},"数据来源：",-1),A={class:"item"},E=C("span",{class:"label"},"疫苗生产企业：",-1),F={__name:"index",setup(e){const{appContext:a}=N(),l=a.config.globalProperties,t=V(),i=b([]),o=b(0),r=b({code:"",name:"全部"}),d=m([{label:"接种人群",prop:"pageName",minWidth:"250",overflowTip:!0},{label:"摸底总人数",prop:"md",minWidth:"110"},{label:"合计",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj",minWidth:"120"},{label:"当日接种人数",prop:"dr",minWidth:"120"}]},{label:"第一剂",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj1",minWidth:"120",type:"clickable"},{label:"当日接种人数",prop:"dr1",minWidth:"120",type:"clickable"}]},{label:"第二剂",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj2",minWidth:"120",type:"clickable"},{label:"当日接种人数",prop:"dr2",minWidth:"120",type:"clickable"}]},{label:"第三剂",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj3",minWidth:"120",type:"clickable"},{label:"当日接种人数",prop:"dr3",minWidth:"120",type:"clickable"}]},{label:"第四剂",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj4",minWidth:"120",type:"clickable"},{label:"当日接种人数",prop:"dr4",minWidth:"120",type:"clickable"}]},{label:"第五剂（未感染）",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj5",minWidth:"120",type:"clickable"},{label:"当日接种人数",prop:"dr5",minWidth:"120",type:"clickable"}]},{label:"第六剂（未感染）",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"lj5",minWidth:"120",type:"clickable"},{label:"当日接种人数",prop:"dr5",minWidth:"120",type:"clickable"}]},{label:"已感染人群",hasChildrenTitle:!0,list:[{label:"累计接种人数",prop:"ygrlj",minWidth:"120"},{label:"当日接种人数",prop:"ygrdr",minWidth:"120"}]}]),p=b(null),v=b(null),w=b(null),x=b(!1);let P=m({areaId:t.userInfo.areaId,areaCode:t.userInfo.areaCode,selectAreaLevel:sessionStorage.getItem("currentLevel"),skipValue:String(Number(sessionStorage.getItem("currentLevel"))+1),areaName:t.userInfo.areaName});const F=b(null),K=b([l.$dateUtil.dayAddNum(7),l.$dateUtil.currentDate()]),Y=()=>{let e=K.value[0],a=K.value[1];if(!e||!a)return l.$util.showMsg("请选择填报日期范围！","error",5e3,!0);const t={areaCode:P.areaCode,areaLevel:P.selectAreaLevel,startDate:e,endDate:a,fenterNo:F.value.fenterNo,sourceFrom:r.value.code};p.value=t,w.value={sourceFromName:r.value.name,fenterName:F.value.fenterName,areaName:P.areaName},u(t).then((e=>{200===e.data.code?(i.value=e.data.data.data,o.value=e.data.data.sec):e.data.popMsg&&(i.value=[],o.value="",l.$util.showMsg(e.data.popMsg,"error"))}))},J=e=>{P=e,P.skipValue=String(Number(P.selectAreaLevel)+1)},B=()=>{if(!p.value||p.value.areaCode!=P.areaCode)return l.$util.showMsg("查询后才可以导出！","error",5e3,!0);let e=JSON.parse(JSON.stringify(p.value));e=n(s(s({},e),w.value),{areaName:P.areaName+" "+P.areaCode.slice(0,10)}),e.operateType=l.$consts.OPTYPE_OUTPUT,c(e)},H=(e,a)=>{v.value=n(s({},p.value),{crowdKindCode:"合计"==e.pageName?"-1":e.crowdKindCode,fbactid:a.slice(-1)}),x.value=!0},G=()=>{x.value=!1};return k((()=>{})),(e,a)=>{const l=h("ss-area-areaTreeStation"),t=h("ss-date-range-new"),s=h("ss-source-data"),n=h("ss-vaccine-vendor"),p=h("ss-custom-button"),u=h("ss-query-bottom"),c=h("ss-condition-area"),b=h("ss-custom-table");return f(),y("div",S,[g(c,null,{default:W((()=>[C("div",z,[C("div",U,[L,g(l,{modelValue:O(P),"onUpdate:modelValue":a[0]||(a[0]=e=>j(P)?P.value=e:P=e),getToLevelNum:5,showSelect:!1,onNodeClick:J},null,8,["modelValue"])]),C("div",q,[_,g(t,{defaultValue:K.value,"onUpdate:defaultValue":a[1]||(a[1]=e=>K.value=e)},null,8,["defaultValue"])]),C("div",M,[$,g(s,{sourceData:r.value,"onUpdate:modelValue":a[2]||(a[2]=e=>r.value=e)},null,8,["sourceData"])]),C("div",A,[E,g(n,{ref_key:"selectedVaccineVendor",ref:F},null,512)])]),g(u,{secTime:o.value},{default:W((()=>[g(p,{type:"query",onClick:Y}),g(p,{type:"output",onClick:B})])),_:1},8,["secTime"])])),_:1}),g(b,{tableData:i.value,columnList:d,onOpenDetailDialog:H},null,8,["tableData","columnList"]),x.value?(f(),D(I,{key:0,visible:x.value,onClose:G,detailData:v.value,detailOtherData:w.value},null,8,["visible","detailData","detailOtherData"])):T("",!0)])}}};export{F as default};

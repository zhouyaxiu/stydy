import{a as e}from"./area.ee098c38.js";import{u as a,i as l,d as t}from"./setting.2fd48f52.js";import{_ as d,m as u}from"./index.143fdacc.js";import{r as s,j as r,S as o,b as i,c as p,d as n,w as m,A as c,k as v,u as b,U as f,f as I,l as g,Y as C,n as N,e as A,B as U,a1 as V}from"./vendor.cc783c3b.js";const S={class:"areaInfoDialog"},h={class:"dialog-footer"};var y=d({__name:"areaInfoDialog",props:{id:{type:String,default:""},isEdit:{type:Boolean,default:!1},visible:{type:Boolean,required:!0,default:!1}},emits:["fetchData","close"],setup(t,{emit:d}){const A=t,U=u(),{appContext:V}=C(),y=V.config.globalProperties,_={areaCode:{required:!0,trigger:"blur",validator:(e,a,l)=>{a>0&&a<99&&/^[0-9]{2}$/.test(a)?l():l(new Error("接种单位编码范围从01-98,且必须为两位数"))}},areaName:{required:!0,message:"地区名称为必输项，请填写完整再保存。",trigger:"blur"}},x={areaName:{required:!0,message:"地区名称为必输项，请填写完整再保存。",trigger:"blur"}},D=s(null);let T=r({areaId:U.userInfo.areaId,areaCode:U.userInfo.areaCode,selectAreaLevel:U.currentLevel}),E=s({areaCode:"",areaName:""});const P=e=>{T=e},k=()=>{D.value.validate((t=>{if(t)if(A.isEdit){const l={supAreaId:E.value.supAreaId,areaName:E.value.areaName,id:E.value.areaId,operateType:y.$consts.OPTYPE_UPDATE,cModId:U.moduleId};a(l).then((a=>{N.success("修改成功"),e(),d("fetchData"),w()}))}else{const a={supAreaLevel:T.selectAreaLevel,supAreaId:T.areaId,supAreaCode:T.areaCode,areaCode:E.value.areaCode,areaName:E.value.areaName,operateType:y.$consts.OPTYPE_INSERT,cModId:U.moduleId};l(a).then((a=>{200==a.data.code?(N.success("新增成功"),e(),d("fetchData"),w()):N.error(a.data.popMsg)}))}}))},w=()=>{d("close")};return o((()=>A.id),(()=>{(()=>{if(!A.id||""===A.id)return!1;E.value={areaCode:"643600000000",areaId:"2058",supAreaName:"",supAreaId:"1",areaName:"滨州市",supCode:"640000000000"}})()}),{deep:!0,immediate:!0}),(e,a)=>{const l=i("ss-area-areaTreeStation"),d=i("el-form-item"),u=i("el-input"),s=i("el-form"),r=i("el-button"),o=i("el-dialog");return p(),n(o,{title:t.isEdit?"修改":"新增",modelValue:t.visible,"onUpdate:modelValue":a[5]||(a[5]=e=>f(visible)?visible.value=e:null),width:"40%","before-close":w,"close-on-click-modal":!1},{default:m((()=>[c("div",S,[v(s,{"label-width":"160px",model:b(E),ref_key:"areaForm",ref:D,rules:t.isEdit?x:_,inline:""},{default:m((()=>[t.isEdit?I("",!0):(p(),n(d,{key:0,label:"上级地区编码："},{default:m((()=>[v(l,{style:{width:"380px"},modelValue:b(T),"onUpdate:modelValue":a[0]||(a[0]=e=>f(T)?T.value=e:T=e),getToLevelNum:3,onNodeClick:P},null,8,["modelValue"])])),_:1})),t.isEdit?(p(),n(d,{key:1,label:"上级地区编码："},{default:m((()=>[v(u,{style:{width:"380px"},modelValue:b(E).supCode,"onUpdate:modelValue":a[1]||(a[1]=e=>b(E).supCode=e),modelModifiers:{trim:!0},placeholder:"",disabled:t.isEdit},null,8,["modelValue","disabled"])])),_:1})):I("",!0),t.isEdit?(p(),n(d,{key:2,label:"上级地区名称："},{default:m((()=>[v(u,{style:{width:"380px"},modelValue:b(E).supAreaName,"onUpdate:modelValue":a[2]||(a[2]=e=>b(E).supAreaName=e),modelModifiers:{trim:!0},placeholder:"",disabled:t.isEdit},null,8,["modelValue","disabled"])])),_:1})):I("",!0),v(d,{label:"地区编码：",prop:"areaCode"},{default:m((()=>[v(u,{maxlength:"20",style:{width:"380px"},modelValue:b(E).areaCode,"onUpdate:modelValue":a[3]||(a[3]=e=>b(E).areaCode=e),modelModifiers:{trim:!0},placeholder:"",disabled:t.isEdit},null,8,["modelValue","disabled"])])),_:1}),v(d,{label:"地区名称：",prop:"areaName"},{default:m((()=>[v(u,{maxlength:"30",style:{width:"380px"},modelValue:b(E).areaName,"onUpdate:modelValue":a[4]||(a[4]=e=>b(E).areaName=e),modelModifiers:{trim:!0},placeholder:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])]),c("div",h,[v(r,{onClick:w},{default:m((()=>[g("取消")])),_:1}),v(r,{type:"primary",onClick:k},{default:m((()=>[g("保存")])),_:1})])])),_:1},8,["title","modelValue"])}}},[["__scopeId","data-v-40f4d758"]]);const _={class:"condition-row"},x={class:"item"},D=c("span",{class:"label required"},"上级地区：",-1),T={class:"item"},E={class:"item"},P={class:"condition-row"},k={__name:"index",setup(a){const l=u(),{appContext:d}=C(),S=d.config.globalProperties,h=s(!1),k=s(!1),w=s(!1),M=s(!1),L=s(""),q=s(""),F=s(0),Y=s("");let $=r({areaId:l.userInfo.areaId});const j=s(null),B=s([]),z=s(null),O=s(0),R=s(1),Q=s(20);o((()=>w.value),(e=>{e||(L.value="")}),{deep:!0,immediate:!0}),o((()=>M.value),(e=>{e||(q.value="")}),{deep:!0,immediate:!0});const G=e=>{$=e},H=e=>{z.value.setheight()},J=e=>{if("number"==typeof e&&(R.value=e),w.value&&""===L.value)return N.error("请输入地区编码"),!1;if(M.value&&""===q.value)return N.error("请输入地区名称"),!1;$.areaId,L.value,q.value,R.value,S.$consts.OPTYPE_QUERY,l.moduleId;let a={sec:.046,data:{total:21,list:[{id:"2",areaCode:"640100000000",areaName:"银川市",updateDate:"2022-06-06 14:38:40",updateUser:"超级管理员1",tableStatus:"0",supId:"1",supArea:null},{id:"184",areaCode:"640200000000",areaName:"石嘴山市",updateDate:"2016-03-24 12:20:27",updateUser:"INIT",tableStatus:"0",supId:"1",supArea:null},{id:"285",areaCode:"640300000000",areaName:"吴忠市",updateDate:"2016-03-24 12:20:28",updateUser:"INIT",tableStatus:"0",supId:"1",supArea:null},{id:"425",areaCode:"640400000000",areaName:"固原市",updateDate:"2016-03-24 12:20:28",updateUser:"INIT",tableStatus:"0",supId:"1",supArea:null},{id:"596",areaCode:"640500000000",areaName:"中卫市",updateDate:"2016-03-24 12:20:29",updateUser:"INIT",tableStatus:"0",supId:"1",supArea:null},{id:"2001",areaCode:"642100000000",areaName:"济南市",updateDate:"2016-06-02 10:20:18",updateUser:"超级管理员",tableStatus:"0",supId:"1",supArea:null},{id:"2008",areaCode:"642200000000",areaName:"青岛市",updateDate:"2016-06-02 11:10:44",updateUser:"超级管理员",tableStatus:"0",supId:"1",supArea:null},{id:"2014",areaCode:"642300000000",areaName:"淄博市",updateDate:"2016-06-02 11:10:56",updateUser:"超级管理员",tableStatus:"0",supId:"1",supArea:null},{id:"2020",areaCode:"642400000000",areaName:"枣庄市",updateDate:"2016-06-02 15:22:58",updateUser:"超级管理员",tableStatus:"0",supId:"1",supArea:null},{id:"2026",areaCode:"642500000000",areaName:"东营市",updateDate:"2016-06-02 15:23:09",updateUser:"超级管理员",tableStatus:"0",supId:"1",supArea:null},{id:"2031",areaCode:"642800000000",areaName:"济宁市",updateDate:"2016-06-02 10:25:46",updateUser:"超级管理员",tableStatus:"0",supId:"1",supArea:null},{id:"2037",areaCode:"642900000000",areaName:"泰安市",updateDate:"2016-06-02 15:50:04",updateUser:"超级管理员",tableStatus:"0",supId:"1",supArea:null},{id:"2041",areaCode:"643100000000",areaName:"日照市",updateDate:"2016-06-02 14:10:49",updateUser:"超级管理员",tableStatus:"0",supId:"1",supArea:null},{id:"2046",areaCode:"643200000000",areaName:"莱芜市",updateDate:"2016-06-02 11:11:09",updateUser:"超级管理员",tableStatus:"0",supId:"1",supArea:null},{id:"2049",areaCode:"643300000000",areaName:"临沂市",updateDate:"2016-06-02 14:13:37",updateUser:"超级管理员",tableStatus:"0",supId:"1",supArea:null},{id:"2052",areaCode:"643400000000",areaName:"德州市",updateDate:"2016-06-02 14:15:34",updateUser:"超级管理员",tableStatus:"0",supId:"1",supArea:null},{id:"2058",areaCode:"643600000000",areaName:"滨州市",updateDate:"2016-06-02 15:59:51",updateUser:"超级管理员",tableStatus:"0",supId:"1",supArea:null},{id:"100000109",areaCode:"643800000000",areaName:"自测市A",updateDate:"2024-01-12 10:31:53",updateUser:"超级管理员1",tableStatus:"0",supId:"1",supArea:null},{id:"100000086",areaCode:"645500000000",areaName:"测试删除某接种单位数据",updateDate:"2023-07-17 15:01:07",updateUser:"超级管理员1",tableStatus:"0",supId:"1",supArea:null},{id:"100000105",areaCode:"648800000000",areaName:"原地区",updateDate:"2023-08-11 13:10:10",updateUser:"超级管理员1",tableStatus:"0",supId:"1",supArea:null}],pageNum:1,pageSize:20,size:20,startRow:1,endRow:20,pages:2,prePage:0,nextPage:2,isFirstPage:!0,isLastPage:!1,hasPreviousPage:!1,hasNextPage:!0,navigatePages:8,navigatepageNums:[1,2],navigateFirstPage:1,navigateLastPage:2}};B.value=a.data.list,F.value=a.sec,O.value=a.data.total},K=()=>{h.value=!0,k.value=!1},W=()=>{j.value=null,k.value=!1,h.value=!1};return(a,d)=>{const u=i("ss-area-areaTreeStation"),s=i("el-checkbox"),r=i("el-input"),o=i("ss-custom-button"),C=i("ss-explain-tip-text"),X=i("ss-condition-area"),Z=i("ss-pagination"),ee=i("el-table-column"),ae=i("el-button"),le=i("ss-table");return p(),A("div",null,[v(X,{onSetConditionFlag:H},{default:m((()=>[c("div",_,[c("div",x,[D,v(u,{getToLevelNum:3,modelValue:b($),"onUpdate:modelValue":d[0]||(d[0]=e=>f($)?$.value=e:$=e),onNodeClick:G},null,8,["modelValue"])]),c("div",T,[v(s,{modelValue:w.value,"onUpdate:modelValue":d[1]||(d[1]=e=>w.value=e),label:!0,class:"label"},{default:m((()=>[g("地区编码：")])),_:1},8,["modelValue"]),v(r,{disabled:!w.value,clearable:"",modelValue:L.value,"onUpdate:modelValue":d[2]||(d[2]=e=>L.value=e),modelModifiers:{trim:!0}},null,8,["disabled","modelValue"])]),c("div",E,[v(s,{modelValue:M.value,"onUpdate:modelValue":d[3]||(d[3]=e=>M.value=e),label:!0,class:"label"},{default:m((()=>[g("地区名称：")])),_:1},8,["modelValue"]),v(r,{disabled:!M.value,clearable:"",modelValue:q.value,"onUpdate:modelValue":d[4]||(d[4]=e=>q.value=e),modelModifiers:{trim:!0}},null,8,["disabled","modelValue"])])]),c("div",P,[v(o,{type:"insert",onClick:K}),v(o,{type:"query",onClick:J}),v(C,{tipText:Y.value,secTime:F.value,showSecTimeFlag:!0},null,8,["tipText","secTime"])])])),_:1}),v(Z,{total:O.value,pageIndex:R.value,pageSize:Q.value,onPageChange:J},null,8,["total","pageIndex","pageSize"]),v(le,{data:B.value,headerCellStyle:{"text-align":"center"},cellStyle:{"text-align":"center"},ref_key:"tabPage",ref:z},{default:m((()=>[v(ee,{"min-width":"30px",type:"index",label:"序号"},{default:m((e=>[g(U((R.value-1)*Q.value+e.$index+1),1)])),_:1}),v(ee,{label:"地区编码",prop:"areaCode"}),v(ee,{label:"地区名称",prop:"areaName"}),v(ee,{label:"操作"},{default:m((a=>[v(ae,{type:"primary",link:"",onClick:e=>{return l=a.row,j.value=l.id,h.value=!0,void(k.value=!0);var l}},{default:m((()=>[g("修改")])),_:2},1032,["onClick"]),v(ae,{type:"primary",link:"",onClick:d=>{return u=a.row,void V.confirm("请问是否确认删除?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"danger"}).then((()=>{t({id:u.id,operateType:S.$consts.OPTYPE_DELETE,cModId:l.moduleId}).then((a=>{200==a.data.code?(N.success("用户删除成功"),J(),e()):N.error(a.data.popMsg)}))})).catch((()=>{N.info("删除取消")}));var u}},{default:m((()=>[g("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),h.value?(p(),n(y,{key:0,visible:h.value,id:j.value,isEdit:k.value,onClose:W,onFetchData:J},null,8,["visible","id","isEdit"])):I("",!0)])}}};export{k as default};
